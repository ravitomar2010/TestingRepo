def datemy = new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'", TimeZone.getTimeZone("UTC")) 
properties([[$class: 'JiraProjectProperty', siteName: 'http://jiradev.mercer.com/'], parameters([string(defaultValue: 'ravitomar', description: 'Enter username', name: 'Username', trim: false), password(defaultValue: 'raviomar', description: 'Enter your password', name: 'Password'), string(defaultValue: 'servername', description: 'Enter server name', name: 'Server Name', trim: true), choice(choices: ['DEV', 'QA', 'UAT', 'PROD'], description: 'Please select environment', name: 'Environment')])])
node("master") {

       stage ('Git Checkout') {
        
		echo 'Checking out code'
		checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/ravitomar2010/TestingRepo.git']]])
                            
                              }
	stage('Copy code')	{
	
	 			powershell label: '', script: 'Invoke-Command -ComputerName ${env:Server Name} -Credential $cred -Authentication Negotiate -ScriptBlock {Copy-Item -Path ${env:WORKSPACE}\\ -Destination \\\\${env:ServerDirectory}}\\C$\\${env:datemy}}'
		
			
		
		
}	
}